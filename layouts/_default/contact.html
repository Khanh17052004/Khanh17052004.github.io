{{ define "main" }}

<div class="starfall-bg">
    <i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i>
    <i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i>
</div>

<div class="contact-page-container">
    <div class="contact-wrapper">
        
        <div class="contact-left">
            <h1 class="contact-header">CONTACT</h1>
            <div class="contact-sub-header">MINH KHANH</div>
            
            <div class="contact-info-list">
                <div class="info-row">
                    <span class="icon">üìß</span>
                    <a href="mailto:{{ .Site.Params.profileMode.email }}">{{ .Site.Params.profileMode.email }}</a>
                </div>
                <div class="info-row">
                    <span class="icon">üìû</span>
                    <a href="tel:{{ .Site.Params.profileMode.phone }}">{{ .Site.Params.profileMode.phone }}</a>
                </div>
                <div class="info-row">
                    <span class="icon">üìç</span>
                    <span>TP. H·ªì Ch√≠ Minh</span>
                </div>
            </div>

            <div class="contact-socials-round">
                {{- range .Site.Params.socialIcons }}
                <a href="{{ .url }}" target="_blank" class="social-circle">
                    {{- partial "svg.html" . }}
                </a>
                {{- end }}
            </div>
        </div>

        <div class="contact-right">
            <form id="cyber-contact-form" class="cyber-form" action="https://formspree.io/f/xlgeewgp" method="POST">
                
                <div class="form-group">
                    <input type="text" name="name" id="name" placeholder=" " required>
                    <label for="name">Name *</label>
                </div>

                <div class="form-group">
                    <input type="email" name="email" id="email" placeholder=" " required>
                    <label for="email">Email *</label>
                </div>

                <div class="form-group">
                    <input type="text" name="subject" id="subject" placeholder=" ">
                    <label for="subject">Subject</label>
                </div>

                <div class="form-group">
                    <textarea name="message" id="message" placeholder=" " required></textarea>
                    <label for="message">Message *</label>
                </div>

                <button type="submit" class="btn-send" id="cyber-submit-btn">SEND MESSAGE</button>
                
                <p id="cyber-form-status" style="display: none; margin-top: 15px; font-weight: bold; font-family: monospace;"></p>
            </form>
        </div>

    </div>
</div>

<script>
    var form = document.getElementById("cyber-contact-form");
    var statusMsg = document.getElementById("cyber-form-status");
    var btn = document.getElementById("cyber-submit-btn");

    async function handleSubmit(event) {
        event.preventDefault(); // Ch·∫∑n chuy·ªÉn trang
        
        // Hi·ªáu ·ª©ng ƒëang g·ª≠i
        btn.innerHTML = "SENDING...";
        btn.style.opacity = "0.7";
        statusMsg.style.display = "none";
        
        var data = new FormData(event.target);

        fetch(event.target.action, {
            method: form.method,
            body: data,
            headers: {
                'Accept': 'application/json' // Quan tr·ªçng: Y√™u c·∫ßu Formspree tr·∫£ v·ªÅ JSON thay v√¨ redirect
            }
        }).then(response => {
            if (response.ok) {
                // TH√ÄNH C√îNG
                statusMsg.innerHTML = "‚úÖ SYSTEM: Message transmitted successfully!";
                statusMsg.style.color = "#00ff00"; // M√†u xanh neon
                statusMsg.style.textShadow = "0 0 10px #00ff00";
                statusMsg.style.display = "block";
                form.reset(); // X√≥a n·ªôi dung form
                btn.innerHTML = "SEND MESSAGE";
            } else {
                // C√ì L·ªñI T·ª™ SERVER
                response.json().then(data => {
                    if (Object.hasOwn(data, 'errors')) {
                        statusMsg.innerHTML = "‚ùå ERROR: " + data["errors"].map(error => error["message"]).join(", ");
                    } else {
                        statusMsg.innerHTML = "‚ùå SYSTEM ERROR: Transmission failed.";
                    }
                    statusMsg.style.color = "#ff0055"; // M√†u ƒë·ªè neon
                    statusMsg.style.display = "block";
                    btn.innerHTML = "SEND MESSAGE";
                })
            }
        }).catch(error => {
            // L·ªñI M·∫†NG
            statusMsg.innerHTML = "‚ùå CONNECTION ERROR: Unable to reach server.";
            statusMsg.style.color = "#ff0055";
            statusMsg.style.display = "block";
            btn.innerHTML = "SEND MESSAGE";
        });
        
        btn.style.opacity = "1";
    }

    form.addEventListener("submit", handleSubmit);
</script>

{{ end }}